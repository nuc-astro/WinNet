<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WinNet: Coding guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="winnet_logo.png"/></td>
<!--
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WinNet
-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('coding_conventions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Coding guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md0"></a>
Coding conventions</h2>
<p>Use Fortran 90 or later. Port parts of code written in Fortran77 to Fortran90. Every subroutine must be in a module. Always use: <code>implicit none</code>, <code>intent(in)</code>, <code>intent(out)</code> etc. When working with arrays, avoid specifying ranges, or specify ranges explicitly, i.e.: </p><div class="fragment"><div class="line"><a class="code" href="namespacebin_1_1class__files_1_1nucleus__multiple__class.html#a14c69e84e56f7eea76a4b8a69dfef0a7">A</a>(1:<a class="code" href="namespacegear__module.html#ad8d7b82322d2ab1efc3b563b6cddfbdd">n</a>)= <a class="code" href="namespacebin_1_1create__spontaneous__fission__file.html#a119e91b9dc3c08174fbb659484752325">B</a>(1:<a class="code" href="namespacegear__module.html#ad8d7b82322d2ab1efc3b563b6cddfbdd">n</a>) + C(1:<a class="code" href="namespacegear__module.html#ad8d7b82322d2ab1efc3b563b6cddfbdd">n</a>) ! or</div>
<div class="line"><a class="code" href="namespacebin_1_1class__files_1_1nucleus__multiple__class.html#a14c69e84e56f7eea76a4b8a69dfef0a7">A</a> = <a class="code" href="namespacebin_1_1create__spontaneous__fission__file.html#a119e91b9dc3c08174fbb659484752325">B</a> + C</div>
</div><!-- fragment --><p>Avoid implicit range specification, such as <code>A(:)= B(:) + C(:)</code>. Use named loops with self-explaining names. Do not use <code>goto</code>. Always use <code>print*</code> instead of <code>write(*,*)</code> for console output. Do not use array(:); use either array(1:n) or simply array. The type <code>real(r_kind)</code> is defined in <a class="el" href="macros_8h.html">macros.h</a>. Use it everywhere instead of <code>real*8</code> or <code>real</code>. Avoid long lines; line width should be no more than 78-80 characters; if line doesn't fit, wrap it with a '&amp;' character: </p><div class="fragment"><div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> ((group_index.eq.4).and.&amp;</div>
<div class="line">         ((parts(1).eq.<span class="stringliteral">&#39;    n&#39;</span>).or.&amp;</div>
<div class="line">          (parts(2).eq.<span class="stringliteral">&#39;    n&#39;</span>))) then</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1"></a>
Usage of git-hooks</h2>
<p>For developing it is useful to use git-hooks. These hooks can be used to test the Code prior to pushing/commiting changes. If the following shell script is saved in "winnet_path/.git/hooks/pre-commit", the automatic test cases will be executed before every commit. This will prevent you from commiting non-functioning code versions.</p>
<div class="fragment"><div class="line">#!/bin/bash</div>
<div class="line"> </div>
<div class="line"># If you move this script to .git/hooks/ the tests will be executed whenever commiting a new version</div>
<div class="line"> </div>
<div class="line"># Tell the person whats going on</div>
<div class="line">echo &quot;Preparing to run tests... &quot;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"># Compile with the Makefile.example</div>
<div class="line">make -f Makefile.example clean &gt; /dev/null 2&gt;&amp;1</div>
<div class="line">make -f Makefile.example -j4 &gt; /dev/null 2&gt;&amp;1</div>
<div class="line"> </div>
<div class="line">if [ ! -f bin/winnet ]; then</div>
<div class="line">  echo &quot;Could not compile the run!&quot;</div>
<div class="line">  echo &quot;Check the code before the commit!&quot;</div>
<div class="line">  echo &quot;Exiting!&quot;</div>
<div class="line">  exit 1</div>
<div class="line">fi</div>
<div class="line"> </div>
<div class="line"># Get the ouput of the tests</div>
<div class="line">echo &quot;Running tests...&quot;</div>
<div class="line">output_tests=$(make -f Makefile.example tests) </div>
<div class="line">last_line=$(echo &quot;$output_tests&quot; | grep &#39;tests have&#39;)</div>
<div class="line"># Check that all tests have passed</div>
<div class="line">if [[ ${last_line} = *&quot;successfully&quot;* ]]; then</div>
<div class="line">  :</div>
<div class="line">else</div>
<div class="line">  echo &quot;Test failed - commit denied. Run tests and confirm they pass before pushing&quot;</div>
<div class="line">  echo &quot;The failing tests are:&quot;</div>
<div class="line">  fail_tests=$(echo &quot;$output_tests&quot; | grep &#39;[FAIL]&#39;)</div>
<div class="line">  echo &quot;$fail_tests&quot;</div>
<div class="line">  echo &quot;Exiting!&quot;</div>
<div class="line">  exit 1</div>
<div class="line">fi</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
Doxygen styling conventions</h2>
<p>Doxygen compatible comment block always starts with <code>!&gt;</code>. Subsequent lines must start with two exclamation marks <code>!!</code>. Description of function parameters should be in the end of lines defining those parameters, and should start with <code>!&lt;</code>, e.g.: </p><div class="fragment"><div class="line"><span class="keyword">function </span>foo(bar)</div>
<div class="line"><span class="keywordtype">implicit none</span></div>
<div class="line"><span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: bar<span class="comment"> !&lt; total count of weak rates</span></div>
</div><!-- fragment --><p> Supply each file with a header describing what the file is about: </p><div class="fragment"><div class="line"><span class="comment">!&gt; @file parameter_class.f90</span></div>
<div class="line"><span class="comment">!!</span></div>
<div class="line"><span class="comment">!! @brief Module \ref parameter_class with parameters</span></div>
<div class="line"><span class="comment">!!</span></div>
</div><!-- fragment --><p> Example header for a module, subroutine or function: </p><div class="fragment"><div class="line"><span class="comment">!&gt; Brief description (optional)</span></div>
<div class="line"><span class="comment">!!</span></div>
<div class="line"><span class="comment">!! Detailed description:</span></div>
<div class="line"><span class="comment">!! \li what the function is for;</span></div>
<div class="line"><span class="comment">!! \li description of parameters [with units];</span></div>
<div class="line"><span class="comment">!! \li return value (optional)</span></div>
<div class="line"><span class="comment">!!</span></div>
<div class="line"><span class="comment">!! @author Whom Toblame</span></div>
<div class="line"><span class="comment">!! @date   22.01.03  !! either YYYY-MM-DD or DD.MM.YY</span></div>
<div class="line"><span class="comment">!!</span></div>
<div class="line"><span class="keyword">function </span>foo(bar)</div>
</div><!-- fragment --><p> supplement all subroutines with your name and the date of last modification. E.g.: </p><div class="fragment"><div class="line"><span class="comment">!! \b Updated:</span></div>
<div class="line"><span class="comment">!!   \li 01.12.11: Christian Winteler</span></div>
<div class="line"><span class="comment">!!   \li 22.07.13: Marcella Ugliano</span></div>
<div class="line">!!   \li 11.01.14: oleg korobkin</div>
</div><!-- fragment --><p> use <code>enddo</code>, <code>endif</code> and <code>endselect</code> instead of <code>end do</code>, <code>end if</code> and <code>end select</code>. for long conditional blocks, append a comment after <code>endif</code> reminding the condition, e.g.: </p><div class="fragment"><div class="line"><span class="keywordflow">   endif</span> <span class="comment">!&lt; i&gt;0</span></div>
<div class="line"><span class="keywordflow">endif</span> <span class="comment">!&lt; j&gt;0</span></div>
</div><!-- fragment --><p> write full name in the end of a subroutine or function: </p><div class="fragment"><div class="line"><span class="keyword">end subroutine </span>readweak</div>
</div><!-- fragment --><p> use three spaces for indentation; never use tabs comments should be left aligned with the current block, i.e.: </p><div class="fragment"><div class="line"><span class="comment">! allocate the array of weak reactions</span></div>
<div class="line"><span class="keyword">allocate</span>(weak_rate(nweak),stat=alloc_stat)</div>
</div><!-- fragment --><p> rather than: </p><div class="fragment"><div class="line"><span class="comment">!----- allocate the array of weak reactions</span></div>
<div class="line">                <span class="keyword">allocate</span>(weak_rate(nweak),stat=alloc_stat)</div>
</div><!-- fragment --><p> two empty lines between subroutines spaces:</p><ul>
<li>right of equal sign, e.g. <code>x(k)= k + 2</code></li>
<li>no space in products or divisions: <code>x1*x2</code></li>
<li>spaces on both sides of + or - sign, e.g. <code>x + 1</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Pushing changes to master branch</h2>
<p>The master branch is proteced and it is not possible to push to it directly. All changes in the code have to be pushed to other branches and then merged to the master branch with a pull request. When creating a pull request the automatic test cases will be run on a github server. Only if all tests pass, it is possible to merge the pull request. The scripts to automatically run these tests are located in the hidden ".github" folder. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="anamespacebin_1_1create__spontaneous__fission__file_html_a119e91b9dc3c08174fbb659484752325"><div class="ttname"><a href="namespacebin_1_1create__spontaneous__fission__file.html#a119e91b9dc3c08174fbb659484752325">bin.create_spontaneous_fission_file.B</a></div><div class="ttdeci">B</div><div class="ttdef"><b>Definition:</b> <a href="create__spontaneous__fission__file_8py_source.html#l00028">create_spontaneous_fission_file.py:28</a></div></div>
<div class="ttc" id="anamespacebin_1_1class__files_1_1nucleus__multiple__class_html_a14c69e84e56f7eea76a4b8a69dfef0a7"><div class="ttname"><a href="namespacebin_1_1class__files_1_1nucleus__multiple__class.html#a14c69e84e56f7eea76a4b8a69dfef0a7">bin.class_files.nucleus_multiple_class.A</a></div><div class="ttdeci">list A</div><div class="ttdef"><b>Definition:</b> <a href="nucleus__multiple__class_8py_source.html#l00332">nucleus_multiple_class.py:332</a></div></div>
<div class="ttc" id="anamespacegear__module_html_ad8d7b82322d2ab1efc3b563b6cddfbdd"><div class="ttname"><a href="namespacegear__module.html#ad8d7b82322d2ab1efc3b563b6cddfbdd">gear_module::n</a></div><div class="ttdeci">integer, private n</div><div class="ttdef"><b>Definition:</b> <a href="gear__module_8f90_source.html#l00071">gear_module.f90:71</a></div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
